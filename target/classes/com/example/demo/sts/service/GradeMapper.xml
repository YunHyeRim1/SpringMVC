<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.sts.service.GradeMapper">
<!-- 
	// Grade
	private int gradeNum, score, stuNum;
    private String subject, grade, examDate, passExam;
    private int subNum, teaNum;
    // Subject
	private String description;
	// Teacher
	private String teaName, email, teaPassword, teaProfileImage;
	// Student
	private String userid, stuPassword, stuName, birthday, gender, regDate, stuProfileImage;
 -->
<resultMap type="com.example.demo.sts.service.GradeVo" id="gradeMap">
	<id property="gradeNum" column="grade_num"/>
	<result property="score" column="score"/>
	<result property="stuNum" column="stuNum"/>
	<result property="subject" column="subject"/>
	<result property="grade" column="grade"/>
	<result property="examDate" column="examDate"/>
	<result property="passExam" column="passExam"/>
	<result property="subNum" column="subNum"/>
	<result property="teaNum" column="teaNum"/>
	<result property="description" column="description"/>
	<result property="teaName" column="teaName"/>
	<result property="email" column="email"/>
	<result property="teaPassword" column="teaPassword"/>
	<result property="teaProfileImage" column="teaProfileImage"/>
	<result property="userid" column="userid"/>
	<result property="stuPassword" column="stuPassword"/>
	<result property="stuName" column="stuName"/>
	<result property="birthday" column="birthday"/>
	<result property="gender" column="gender"/>
	<result property="regDate" column="regDate"/>
	<result property="stuProfileImage" column="stuProfileImage"/>
</resultMap>
	<insert id="insertMany" parameterType="list">
		insert into grades
		( subject, score, stu_num, exam_date )
		values 
		 <foreach item="i" collection="list" separator=",">
	        ( #{i.subject}, #{i.score}, 
	        #{i.stuNum}, #{i.examDate} )
  		</foreach>
	</insert>
	<select id="selectJoinAll" resultMap="gradeMap">
		select
			g.grade_num gradeNum, 
			g.score score, 
			g.grade grade,
			g.exam_date examDate,
			g.pass_exam passExam,
		    j.sub_num subNum, 
		    j.description description,
		    t.tea_num teaNum,
			t.name teaName, 
			t.email email, 
			t.password teaPassword, 
			t.profileImage teaProfileImage,
			s.stu_num stuNum,
			s.userid userid, 
			s.password stuPassword, 
			s.name stuName, 
			s.birthday birthday, 
			s.gender gender, 
			s.reg_date regDate, 
			s.profileImage stuProfileImage
			
		from students s 
			join teachers t on s.subject like t.subject
			join subjects j on s.subject like j.subject
			join grades g on s.subject like g.subject
			
	</select>
</mapper>